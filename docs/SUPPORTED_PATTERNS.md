# Ninja-Snatch v10.0 — Поддерживаемые паттерны

## Обзор

Ninja-Snatch автоматически обнаруживает и сохраняет анимации при экспорте блоков с веб-сайтов. В версии 10.0 добавлен Smart Extract с распознаванием фреймворков и оптимизацией кода.

---

## 0. Smart Extract — Распознавание фреймворков (v10.0) ✨

Smart Extract автоматически определяет используемый фреймворк и оптимизирует извлечённый код.

### Поддерживаемые фреймворки

| Фреймворк | Маркеры обнаружения | Обработка |
|-----------|---------------------|------------|
| **React/Next.js** | `__`, `_`, CSS-module хеши | Очистка хешей, сохранение семантики |
| **Vue/Nuxt** | `data-v-`, scoped атрибуты | Удаление scope-атрибутов |
| **Tailwind CSS** | utility-классы (`flex`, `p-4`, `bg-`) | Сохранение всех utility классов! |
| **Webflow** | `w-`, `wf-`, `webflow` | Сохранение логики анимаций |
| **Framer** | `framer-`, `__framer` | Извлечение motion-компонентов |
| **Angular** | `ng-`, `_ngcontent`, `ng-version` | Очистка Angular-атрибутов |
| **Svelte** | `svelte-`, `__svelte` | Очистка Svelte-хешей |

### Паттерны CSS-module хешей

Smart Extract распознаёт и очищает хеши, **сохраняя Tailwind классы**:

```
✅ Сохраняется: flex, p-4, bg-blue-500, hover:text-white
❌ Удаляется: styles__button__abc123, _1x2y3z, header_abc12
```

### Оптимизация inline-стилей

Smart Extract группирует повторяющиеся inline-стили и создаёт классы:

```html
<!-- До -->
<div style="display:flex;gap:16px;">...</div>
<div style="display:flex;gap:16px;">...</div>

<!-- После -->
<style>.flex-container { display:flex; gap:16px; }</style>
<div class="flex-container">...</div>
<div class="flex-container">...</div>
```

---

## 1. Кастомные курсоры (v9.0)

Кастомные курсоры — это элементы с фиксированным позиционированием, которые следуют за движением мыши. Очень популярны на сайтах агентств и портфолио.

### Методы обнаружения

**1.1 На основе классов (Основной)**
```css
[class*="z-[9999]"]     - Tailwind z-index (наиболее частый)
[class*="z-[999]"]      - Вариант с более низким z-index
[class*="cursor"]       - Общий класс курсора
[class*="Cursor"]       - Вариант с заглавной буквы
.custom-cursor          - Явное имя класса
.cursor-dot             - Точка-курсор
.cursor-outline         - Контурный курсор
.cursor-follower        - "Преследователь"
.mouse-follower         - Альтернативное именование
```

**1.2 Структурное обнаружение (Резервный)**

Если совпадений по классам нет, анализируются характеристики элементов:
- `position: fixed`
- `pointer-events: none`
- Размер: Ширина < 100px И Высота < 100px
- `z-index: > 9000`

### Примеры

```html
<!-- Обнаружение по классу -->
<div class="z-[9999] pointer-events-none fixed">
  <div class="cursor-dot"></div>
</div>

<!-- Структурное обнаружение -->
<div style="position:fixed;pointer-events:none;z-index:9999;width:20px;height:20px;">
</div>
```

---

## 2. Анимация счетчиков (v9.0)

Анимированные счетчики чисел, которые увеличиваются от нуля до целевого значения при появлении в области видимости.

### Методы обнаружения

**2.1 Атрибуты данных (Самый надежный)**
```
data-target="150"       - Наиболее распространен
data-count="100"        - Альтернатива
data-value="50"         - Вариант с value
data-end="200"          - Конечное значение
data-number="75"        - Вариант с number
```

**2.2 Эвристика по суффиксам**

Если атрибуты отсутствуют, целевое значение определяется по соседнему элементу-суффиксу:

| Суффикс | Значение по умолчанию | Применение |
|---------|-----------------------|------------|
| `+`     | 50                    | "Лет опыта", "Проектов" |
| `%`     | 98                    | "Успешность", "Удовлетворенность" |
| `k`/`K` | 10                    | Тысячи (подписчики, юзеры) |
| `M`     | 1                     | Миллионы |

**2.3 Выбор элементов**
```css
span                    - Основной (самый частый)
[class*="counter"]      - Класс счетчика
[class*="stat"]         - Класс статистики
[class*="number"]       - Класс числа
```

---

## 3. Бесконечные ленты (Marquee v2)

Горизонтальные скролл-анимации с дублированным контентом.

### Методы обнаружения

**3.1 Специфично для Webflow**
```css
.marquee-track                    - Стандартный трек
.marquee-reverse-track            - Обратное направление
[class*="marquee-track"]          - Частичное совпадение
[class*="marquee-reverse-track"]  - Частичное (реверс)
```

**3.2 Универсальное обнаружение**
```css
[class*="whitespace-nowrap"]      - Tailwind no-wrap
[class*="scroll"]                 - Контейнеры скролла
```

Дополнительная валидация структуры:
- Минимум 4 дочерних элемента.
- Первый и средний элементы имеют идентичный текстовый контент.

---

## 4. Анимации появления (Scroll-Trigger v9.0)

Элементы, которые появляются (fade in) или выезжают (slide) при загрузке или скролле.

### Методы обнаружения

**4.1 На основе Opacity**
```css
[style*="opacity:0"]
[style*="opacity: 0"]
```

**4.2 На основе Transform**
```css
[style*="translateY"]
[style*="translateX"]
```

**4.3 Атрибуты библиотек (v9.0)**
```
data-aos           - Библиотека AOS
data-scroll        - Locomotive Scroll
data-sal           - Библиотека SAL
data-animate       - Общий атрибут
data-reveal        - Общий атрибут
data-inview        - Кастомный
data-w-id          - Webflow (продвинутый маппинг)
```

### Применяемые анимации

- **Opacity reveal**: Плавное появление от 0 до 1 со ступенчатой задержкой (stagger).
- **Transform reveal**: Возврат `translateY`/`translateX` в 0.

---

## 5. Поддержка платформ

| Платформа | Курсор | Счетчики | Ленты | Появление |
|-----------|--------|----------|-------|-----------|
| **Webflow** | ✅ | ✅ | ✅ | ✅ |
| **Framer** | ✅ | ✅ | ✅ | ✅ |
| **React/Next.js** | ✅ | ✅ | ✅ | ✅ |
| **Vue/Nuxt** | ✅ | ✅ | ✅ | ✅ |
| **Tailwind CSS** | ✅ | ✅ | ✅ | ✅ |
| **GSAP** | ✅ | ✅ | ✅ | ✅ |
| **Vanilla JS** | ✅ | ✅ | ✅ | ✅ |

---

## Устранение неполадок

### Курсор не работает
1. Проверьте наличие `pointer-events: none` у элемента.
2. Убедитесь, что z-index достаточно высок (> 9000).
3. Проверьте, что элемент имеет `position: fixed`.

### Счетчик не анимируется
1. Добавьте атрибут `data-target="ЧИСЛО"`.
2. Убедитесь, что начальный текст — "0" или число из 1-2 цифр.
3. Проверьте наличие валидного суффикса (+, %, k, K, M) в соседнем теге.

### Лента не движется
1. Минимум 4 дочерних элемента.
2. Контент должен быть продублирован (для авто-детекции).
3. Можно принудительно добавить класс `.marquee-track`.

---

## 6. Smart Extract — AI Enhancement (v10.0)

Опциональное улучшение кода через LLM (OpenRouter API).

### Функции AI Enhancement

| Функция | Описание |
|---------|----------|
| **Семантические имена** | Замена `div.abc123` на `section.hero-block` |
| **Accessibility** | Добавление ARIA-атрибутов |
| **Оптимизация** | Упрощение вложенной структуры |
| **Документация** | Комментарии к секциям кода |

### Настройка

1. Получите API ключ на [openrouter.ai](https://openrouter.ai)
2. Включите "AI Enhancement" в настройках Smart Extract
3. Введите ключ формата `sk-or-v1-...`

---

## История версий (Паттерны)

- **v10.0**: Smart Extract с распознаванием фреймворков, AI Enhancement.
- **v9.0**: Продвинутые регулярные выражения для скролл-анимаций, поддержка атрибутов библиотек, уточненные счетчики.
- **v8.6**: Исправление проблем с экранированием регулярок.
- **v8.5**: Добавлена универсальная детекция лент (Marquee).
